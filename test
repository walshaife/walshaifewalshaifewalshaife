<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <title>æˆ‘çš„ä¸ªäººåšå®¢</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="ä¸€ä¸ªç®€æ´ã€å¿«é€Ÿã€å¯æ‰©å±•çš„ä¸ªäººåšå®¢æ¨¡æ¿" />
  <style>
    :root {
      --color-bg: #ffffff;
      --color-bg-soft: #f5f7fa;
      --color-border: #e2e8f0;
      --color-text: #1f2933;
      --color-text-light: #4b5563;
      --color-accent: #2563eb;
      --color-accent-hover: #1d4ed8;
      --color-code-bg: #f3f4f6;
      --radius-sm: 4px;
      --radius: 8px;
      --shadow-sm: 0 1px 2px rgba(0,0,0,.06);
      --shadow: 0 2px 6px rgba(0,0,0,.08);
      --transition: .25s cubic-bezier(.4,0,.2,1);
    }
    html[data-theme="dark"] {
      --color-bg: #0f141b;
      --color-bg-soft: #1b2430;
      --color-border: #2a3a4b;
      --color-text: #e5edf5;
      --color-text-light: #94a3b8;
      --color-accent: #3b82f6;
      --color-accent-hover: #1d4ed8;
      --color-code-bg: #1e293b;
    }
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif;
      background: var(--color-bg);
      color: var(--color-text);
      -webkit-font-smoothing: antialiased;
      line-height: 1.6;
    }
    a {
      color: var(--color-accent);
      text-decoration: none;
      transition: color var(--transition);
    }
    a:hover {
      color: var(--color-accent-hover);
    }
    header {
      position: sticky;
      top: 0;
      backdrop-filter: saturate(180%) blur(14px);
      background: rgba(255,255,255,0.75);
      border-bottom: 1px solid var(--color-border);
      z-index: 50;
      transition: background var(--transition), border-color var(--transition);
    }
    html[data-theme="dark"] header {
      background: rgba(15,20,27,0.82);
    }
    .topbar {
      max-width: 1180px;
      margin: 0 auto;
      padding: .75rem 1.25rem;
      display: flex;
      align-items: center;
      gap: 1.25rem;
    }
    .brand {
      font-weight: 600;
      font-size: 1.15rem;
      display: flex;
      align-items: center;
      gap: .5rem;
      letter-spacing: .5px;
    }
    nav {
      margin-left: auto;
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
    }
    nav a {
      padding: .4rem .85rem;
      border-radius: var(--radius-sm);
      font-size: .9rem;
      font-weight: 500;
      color: var(--color-text-light);
    }
    nav a.active,
    nav a:hover {
      background: var(--color-bg-soft);
      color: var(--color-text);
    }
    html[data-theme="dark"] nav a:hover,
    html[data-theme="dark"] nav a.active {
      background: #243141;
    }
    .theme-toggle {
      cursor: pointer;
      border: 1px solid var(--color-border);
      background: var(--color-bg-soft);
      color: var(--color-text-light);
      padding: .45rem .8rem;
      border-radius: var(--radius-sm);
      font-size: .75rem;
      letter-spacing: .5px;
      display: inline-flex;
      align-items: center;
      gap: .4rem;
      transition: background var(--transition), color var(--transition), border-color var(--transition);
    }
    .theme-toggle:hover {
      color: var(--color-text);
    }
    main {
      max-width: 1180px;
      margin: 1.75rem auto 3.5rem;
      padding: 0 1.25rem;
      display: grid;
      grid-template-columns: minmax(0,1fr) 290px;
      gap: 2.2rem;
    }
    @media (max-width: 960px) {
      main {
        grid-template-columns: 1fr;
      }
      .sidebar {
        order: -1;
      }
    }
    .search-bar {
      display: flex;
      gap: .75rem;
      flex-wrap: wrap;
      margin-bottom: 1.25rem;
      align-items: center;
    }
    .search-bar input {
      flex: 1;
      min-width: 240px;
      padding: .65rem .85rem;
      border-radius: var(--radius-sm);
      border: 1px solid var(--color-border);
      background: var(--color-bg-soft);
      color: var(--color-text);
      font-size: .9rem;
      outline: none;
      transition: border-color var(--transition), background var(--transition);
    }
    .search-bar input:focus {
      border-color: var(--color-accent);
      background: var(--color-bg);
    }
    .tags-filter {
      display: flex;
      gap: .5rem;
      flex-wrap: wrap;
    }
    .tag-chip {
      font-size: .7rem;
      text-transform: uppercase;
      letter-spacing: .5px;
      padding: .4rem .65rem;
      background: var(--color-bg-soft);
      color: var(--color-text-light);
      border: 1px solid var(--color-border);
      border-radius: 30px;
      cursor: pointer;
      transition: background var(--transition), color var(--transition), border-color var(--transition);
      user-select: none;
    }
    .tag-chip.active,
    .tag-chip:hover {
      background: var(--color-accent);
      color: #fff;
      border-color: var(--color-accent);
    }
    .posts {
      display: grid;
      gap: 1.25rem;
    }
    .post-card {
      background: var(--color-bg-soft);
      border: 1px solid var(--color-border);
      border-radius: var(--radius);
      padding: 1.15rem 1.15rem 1.05rem;
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      gap: .65rem;
      transition: border-color var(--transition), transform var(--transition), box-shadow var(--transition), background var(--transition);
    }
    .post-card:hover {
      border-color: var(--color-accent);
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }
    .post-date {
      font-size: .65rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: .8px;
      color: var(--color-text-light);
      display: flex;
      gap: .5rem;
      align-items: center;
    }
    .post-card h2 {
      font-size: 1.15rem;
      margin: 0;
      line-height: 1.3;
    }
    .post-excerpt {
      font-size: .85rem;
      color: var(--color-text-light);
      margin: 0;
      line-height: 1.5;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    .post-tags {
      display: flex;
      gap: .4rem;
      flex-wrap: wrap;
      margin-top: .25rem;
    }
    .post-tag {
      font-size: .6rem;
      padding: .25rem .5rem;
      border-radius: 3px;
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      letter-spacing: .5px;
      font-weight: 500;
      text-transform: uppercase;
    }
    html[data-theme="dark"] .post-tag {
      background: #253040;
      border-color: #2f4355;
    }
    .read-more {
      align-self: flex-start;
      margin-top: .25rem;
      font-size: .75rem;
      font-weight: 600;
      letter-spacing: .6px;
      padding: .45rem .85rem;
      background: var(--color-accent);
      color: #fff;
      border-radius: 4px;
      display: inline-flex;
      gap: .35rem;
      align-items: center;
      transition: background var(--transition), transform var(--transition);
    }
    .read-more:hover {
      background: var(--color-accent-hover);
      transform: translateY(-1px);
    }
    .empty {
      padding: 2rem;
      text-align: center;
      font-size: .9rem;
      color: var(--color-text-light);
      border: 2px dashed var(--color-border);
      border-radius: var(--radius);
      background: var(--color-bg-soft);
    }
    .pagination {
      display: flex;
      justify-content: center;
      gap: .4rem;
      flex-wrap: wrap;
      margin-top: 1.25rem;
    }
    .pagination button {
      border: 1px solid var(--color-border);
      background: var(--color-bg-soft);
      color: var(--color-text-light);
      padding: .45rem .75rem;
      min-width: 38px;
      border-radius: var(--radius-sm);
      font-size: .75rem;
      cursor: pointer;
      transition: background var(--transition), color var(--transition), border-color var(--transition), transform var(--transition);
    }
    .pagination button:hover {
      color: var(--color-text);
    }
    .pagination button.active {
      background: var(--color-accent);
      color: #fff;
      border-color: var(--color-accent);
      font-weight: 600;
    }
    .pagination button:disabled {
      opacity: .35;
      cursor: not-allowed;
    }
    .sidebar {
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
      height: max-content;
      position: sticky;
      top: 74px;
    }
    .card {
      background: var(--color-bg-soft);
      border: 1px solid var(--color-border);
      border-radius: var(--radius);
      padding: 1rem 1.05rem 1.1rem;
      display: flex;
      flex-direction: column;
      gap: .65rem;
      box-shadow: var(--shadow-sm);
      transition: background var(--transition), border-color var(--transition);
    }
    .card h3 {
      margin: 0;
      font-size: .9rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
      color: var(--color-text-light);
    }
    .about p, .card p {
      margin: 0;
      font-size: .75rem;
      line-height: 1.5;
      color: var(--color-text-light);
    }
    .tag-cloud {
      display: flex;
      flex-wrap: wrap;
      gap: .5rem;
    }
    .tag-cloud a {
      font-size: .65rem;
      padding: .35rem .55rem;
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: 4px;
      color: var(--color-text-light);
      text-transform: uppercase;
      letter-spacing: .5px;
      transition: background var(--transition), color var(--transition), border-color var(--transition);
    }
    .tag-cloud a:hover {
      background: var(--color-accent);
      color: #fff;
      border-color: var(--color-accent);
    }
    footer {
      border-top: 1px solid var(--color-border);
      padding: 2.5rem 1.25rem 3.5rem;
      background: var(--color-bg-soft);
      margin-top: 3rem;
    }
    footer .inner {
      max-width: 1180px;
      margin: 0 auto;
      display: grid;
      gap: 2rem;
      grid-template-columns: repeat(auto-fit,minmax(240px,1fr));
    }
    footer h4 {
      margin: 0 0 .75rem;
      font-size: .85rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--color-text-light);
    }
    footer ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: .55rem;
    }
    footer li a {
      font-size: .75rem;
      color: var(--color-text-light);
    }
    footer li a:hover {
      color: var(--color-text);
    }
    .copyright {
      text-align: center;
      margin-top: 2.5rem;
      font-size: .65rem;
      color: var(--color-text-light);
      letter-spacing: .5px;
    }
    /* æ–‡ç« é˜…è¯» Overlay */
    .article-overlay {
      position: fixed;
      inset: 0;
      backdrop-filter: blur(16px);
      background: rgba(15,20,27,.82);
      display: none;
      z-index: 200;
      overflow-y: auto;
      padding: 3.5rem 1rem 4rem;
    }
    html[data-theme="light"] .article-overlay {
      background: rgba(255,255,255,.92);
    }
    .article-container {
      max-width: 820px;
      margin: 0 auto;
      background: var(--color-bg);
      padding: 2.25rem 2rem 2.75rem;
      border-radius: 18px;
      border: 1px solid var(--color-border);
      box-shadow: 0 4px 32px -8px rgba(0,0,0,.25);
      position: relative;
      animation: pop .45s var(--transition);
    }
    @media (max-width: 620px) {
      .article-container {
        padding: 1.6rem 1.2rem 2.1rem;
        border-radius: 14px;
      }
    }
    @keyframes pop {
      0% { opacity: 0; transform: translateY(16px) scale(.98); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }
    .close-article {
      position: absolute;
      top: .85rem;
      right: .85rem;
      background: var(--color-bg-soft);
      border: 1px solid var(--color-border);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      cursor: pointer;
      display: grid;
      place-items: center;
      font-size: 1.15rem;
      color: var(--color-text-light);
      transition: background var(--transition), color var(--transition), transform var(--transition);
    }
    .close-article:hover {
      color: var(--color-text);
      transform: rotate(90deg);
    }
    .article-container h1 {
      margin-top: 0;
      font-size: 1.85rem;
      line-height: 1.25;
    }
    .article-meta {
      font-size: .7rem;
      text-transform: uppercase;
      letter-spacing: .6px;
      color: var(--color-text-light);
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }
    .article-content p {
      margin: 1rem 0;
      font-size: .95rem;
      line-height: 1.75;
    }
    .article-content pre {
      background: var(--color-code-bg);
      padding: 1rem;
      border-radius: 10px;
      overflow: auto;
      font-size: .75rem;
      line-height: 1.5;
      border: 1px solid var(--color-border);
    }
    .article-content code {
      background: var(--color-code-bg);
      padding: .15rem .45rem;
      border-radius: 4px;
      font-size: .75rem;
    }
    .article-content h2 {
      margin-top: 2rem;
      margin-bottom: .75rem;
      font-size: 1.35rem;
    }
    .article-content h3 {
      margin-top: 1.5rem;
      margin-bottom: .5rem;
      font-size: 1.05rem;
    }
    .article-content blockquote {
      margin: 1.25rem 0;
      padding: .85rem 1rem;
      border-left: 4px solid var(--color-accent);
      background: var(--color-bg-soft);
      border-radius: 0 8px 8px 0;
      font-size: .9rem;
      color: var(--color-text-light);
    }
    .article-footer {
      margin-top: 2.5rem;
      font-size: .75rem;
      color: var(--color-text-light);
      display: flex;
      flex-wrap: wrap;
      gap: .75rem;
      justify-content: space-between;
      align-items: center;
    }
    .share {
      display: flex;
      gap: .5rem;
    }
    .share button {
      border: 1px solid var(--color-border);
      background: var(--color-bg-soft);
      color: var(--color-text-light);
      padding: .4rem .65rem;
      font-size: .65rem;
      letter-spacing: .5px;
      cursor: pointer;
      border-radius: 6px;
      transition: background var(--transition), color var(--transition), border-color var(--transition);
    }
    .share button:hover {
      background: var(--color-accent);
      color: #fff;
      border-color: var(--color-accent);
    }
    /* æ»šåŠ¨æ¡ */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }
    ::-webkit-scrollbar-track {
      background: var(--color-bg-soft);
    }
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(var(--color-bg-soft), var(--color-accent));
      border-radius: 20px;
      border: 2px solid var(--color-bg-soft);
    }
    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(var(--color-accent), var(--color-accent-hover));
    }
    /* åŠ¨ç”» */
    [data-fade] {
      opacity: 0;
      transform: translateY(12px);
      animation: fadeUp .6s forwards;
    }
    [data-fade][data-delay="1"] { animation-delay: .05s; }
    [data-fade][data-delay="2"] { animation-delay: .1s; }
    [data-fade][data-delay="3"] { animation-delay: .15s; }
    [data-fade][data-delay="4"] { animation-delay: .2s; }
    @keyframes fadeUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .logo-circle {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      background: linear-gradient(135deg,var(--color-accent),var(--color-accent-hover));
      display: grid;
      place-items: center;
      font-size: .75rem;
      font-weight: 600;
      letter-spacing: .5px;
      color: #fff;
      box-shadow: 0 4px 16px -4px rgba(0,0,0,.35);
    }
    .float-add {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 54px;
      height: 54px;
      border-radius: 16px;
      background: var(--color-accent);
      color: #fff;
      font-size: 1.85rem;
      border: none;
      cursor: pointer;
      display: grid;
      place-items: center;
      box-shadow: 0 12px 30px -8px rgba(0,0,0,.35);
      transition: transform var(--transition), background var(--transition);
      z-index: 60;
    }
    .float-add:hover {
      background: var(--color-accent-hover);
      transform: translateY(-4px) rotate(90deg);
    }
    @media (max-width: 560px) {
      .float-add {
        bottom: 16px;
        right: 16px;
        width: 50px;
        height: 50px;
        border-radius: 14px;
        font-size: 1.55rem;
      }
    }
    .notice-dev {
      position: fixed;
      top: 86px;
      right: 16px;
      background: var(--color-bg);
      color: var(--color-text-light);
      font-size: .6rem;
      padding: .5rem .65rem;
      border: 1px dashed var(--color-border);
      border-radius: 8px;
      display: flex;
      gap: .35rem;
      letter-spacing: .5px;
      z-index: 45;
      opacity: .85;
    }
    @media (max-width: 960px) {
      .notice-dev { display: none; }
    }
  </style>
</head>
<body>
  <header>
    <div class="topbar">
      <div class="brand">
        <div class="logo-circle">ME</div>
        <span>æˆ‘çš„ä¸ªäººåšå®¢</span>
      </div>
      <nav>
        <a href="#" class="active" data-nav="home">é¦–é¡µ</a>
        <a href="#" data-nav="archives">å½’æ¡£</a>
        <a href="#" data-nav="tags">æ ‡ç­¾</a>
        <a href="#" data-nav="about">å…³äº</a>
        <button class="theme-toggle" id="themeToggle" aria-label="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™ æ·±è‰²</button>
      </nav>
    </div>
  </header>

  <div class="notice-dev">æ¼”ç¤ºç‰ˆï¼šæ•°æ®æ¥æºäºå‰ç«¯ JSONï¼Œéƒ¨ç½²æ—¶è¯·æ›¿æ¢ä¸ºçœŸå®åç«¯æˆ–é™æ€æ–‡ä»¶</div>

  <main>
    <section>
      <div class="search-bar" data-fade data-delay="1">
        <input type="text" id="searchInput" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜ / æ‘˜è¦ / æ ‡ç­¾ ..." autocomplete="off" />
        <div class="tags-filter" id="tagsFilter"></div>
      </div>
      <div class="posts" id="postsContainer" data-fade data-delay="2"></div>
      <div class="pagination" id="pagination"></div>
    </section>
    <aside class="sidebar">
      <div class="card about" data-fade data-delay="1">
        <h3>å…³äºæˆ‘</h3>
          <p>ğŸ‘‹ ä¸€åå‰ç«¯ / å…¨æ ˆçˆ±å¥½è€…ï¼Œè®°å½•å­¦ä¹ ã€äº§å“æ€è€ƒã€æ•ˆç‡æ–¹å¼ä¸æ‚æ„Ÿã€‚</p>
          <p>ç›®æ ‡ï¼šæ‰“é€ ä¸€ä¸ªé«˜è´¨ã€é•¿æœŸä¸»ä¹‰çš„çŸ¥è¯†èŠ±å›­ã€‚</p>
      </div>
      <div class="card" data-fade data-delay="2">
        <h3>æœ€è¿‘æ›´æ–°</h3>
        <ul id="recentList"></ul>
      </div>
      <div class="card" data-fade data-delay="3">
        <h3>æ ‡ç­¾äº‘</h3>
        <div class="tag-cloud" id="tagCloud"></div>
      </div>
      <div class="card" data-fade data-delay="4">
        <h3>è®¢é˜…</h3>
        <p>æœªæ¥å¯æ¥å…¥ RSS / Email / WebSub ç­‰ã€‚</p>
        <p>å½“å‰ï¼šçº¯é™æ€æ¨¡æ¿ã€‚</p>
      </div>
    </aside>
  </main>

  <footer>
    <div class="inner">
      <div>
        <h4>ç«™ç‚¹</h4>
        <ul>
          <li><a href="#">é¦–é¡µ</a></li>
          <li><a href="#">å½’æ¡£</a></li>
          <li><a href="#">æ ‡ç­¾</a></li>
          <li><a href="#">å…³äº</a></li>
        </ul>
      </div>
      <div>
        <h4>èµ„æº</h4>
        <ul>
          <li><a href="#">å‰ç«¯ç¬”è®°</a></li>
          <li><a href="#">å­¦ä¹ è·¯çº¿</a></li>
          <li><a href="#">å¼€æºé¡¹ç›®</a></li>
          <li><a href="#">å·¥å…·æ¸…å•</a></li>
        </ul>
      </div>
      <div>
        <h4>ç¤¾äº¤</h4>
        <ul>
          <li><a href="#">GitHub</a></li>
          <li><a href="#">æ˜é‡‘</a></li>
          <li><a href="#">çŸ¥ä¹</a></li>
          <li><a href="#">Twitter</a></li>
        </ul>
      </div>
      <div>
        <h4>ç‰ˆæƒ</h4>
        <ul>
          <li><a href="#">ä½¿ç”¨è¯´æ˜</a></li>
          <li><a href="#">éšç§ç­–ç•¥</a></li>
          <li><a href="#">å¼€æºè®¸å¯</a></li>
          <li><a href="#">è”ç³»ä½œè€…</a></li>
        </ul>
      </div>
    </div>
    <div class="copyright">Â© <span id="year"></span> æˆ‘çš„ä¸ªäººåšå®¢ Â· ä¿ç•™æ‰€æœ‰æƒåˆ© Â· åŸºäºé™æ€æ¨¡æ¿</div>
  </footer>

  <button class="float-add" title="å¿«é€Ÿåˆ›å»ºæ–‡ç«  (ç¤ºä¾‹åŠŸèƒ½)" id="quickCreate">+</button>

  <!-- æ–‡ç« é˜…è¯» Overlay -->
  <div class="article-overlay" id="articleOverlay" aria-modal="true" role="dialog">
    <div class="article-container" id="articleContainer">
      <button class="close-article" id="closeArticle" aria-label="å…³é—­æ–‡ç« ">âœ•</button>
      <article id="articleContent">
        <!-- åŠ¨æ€æ³¨å…¥ -->
      </article>
    </div>
  </div>

  <script>
    // æ¨¡æ‹Ÿæ–‡ç« æ•°æ®ï¼ˆç”Ÿäº§ç¯å¢ƒå¯æ›¿æ¢ä¸ºåç«¯ API æˆ–é™æ€ JSONï¼‰
    const postsData = [
      {
        id: 1,
        title: "æ‰“é€ ä¸ªäººçŸ¥è¯†åº“çš„ 7 ä¸ªå…³é”®è®¾è®¡åŸåˆ™",
        date: "2025-08-01",
          tags: ["çŸ¥è¯†ç®¡ç†","æ•ˆç‡","PKM"],
        excerpt: "ä¸ªäººçŸ¥è¯†åº“ä¸ä»…æ˜¯ç¬”è®°å †ç§¯ï¼Œè€Œæ˜¯ä¸€ä¸ªé«˜ä»·å€¼ä¿¡æ¯çš„ç»“æ„åŒ–æ¼”åŒ–ç³»ç»Ÿã€‚æœ¬æ–‡æ€»ç»“æˆ‘åœ¨å®è·µä¸­æ²‰æ·€çš„ 7 ä¸ªè®¾è®¡åŸåˆ™â€¦â€¦",
        content: `
          <p>è¦è®©çŸ¥è¯†åº“æˆä¸ºä¸€ä¸ªâ€œå¢é•¿å‹èµ„äº§â€ï¼Œéœ€è¦åœ¨ç»“æ„ã€è¾“å…¥ã€è¯„ä¼°ã€å†åˆ©ç”¨ç­‰ç»´åº¦è¿›è¡Œç²¾å¿ƒè®¾è®¡ã€‚</p>
          <h2>1. åŸå­åŒ–</h2>
          <p>ä¿æŒç¬”è®°ç²’åº¦è¶³å¤Ÿå°ï¼Œä½¿å…¶å¯å¤ç”¨ã€å¯é‡ç»„ã€‚é¿å…â€œå¤§è€Œå…¨â€çš„é•¿ç¯‡å·¨ç‰©éš¾ä»¥ç»´æŠ¤ã€‚</p>
          <h2>2. è¯­ä¹‰åŒ–å‘½å</h2>
          <p>å‘½ååº”è¯¥æè¿°â€œå†…å®¹ä½œç”¨ + ä½¿ç”¨åœºæ™¯â€ï¼Œå¦‚ï¼š<code>å†³ç­–-æŠ€æœ¯é€‰å‹-å‰ç«¯çŠ¶æ€ç®¡ç†</code>ã€‚</p>
          <h2>3. å¤šç»´åˆ†ç±»</h2>
          <p>ä¸è¦ä¾èµ–å•ä¸€å±‚çº§ç›®å½•ï¼›ä½¿ç”¨æ ‡ç­¾ / ä¸»é¢˜ / é˜¶æ®µç­‰å¤åˆæ£€ç´¢è·¯å¾„ã€‚</p>
          <blockquote>çŸ¥è¯†ç®¡ç† â‰  æ”¶è—ç®¡ç†ï¼›å…³é”®åœ¨äºåŠ å·¥ï¼ˆåŠ å·¥=ç»“æ„åŒ–+è¿æ¥+å†ç”Ÿäº§ï¼‰ã€‚</blockquote>
          <h2>4. è¿æ¥ä¼˜å…ˆ</h2>
          <p>è¾“å‡ºçš„ä»·å€¼æ¥è‡ªè·¨ä¸»é¢˜çš„â€œæ¡¥â€ï¼Œåˆ»æ„è®­ç»ƒè”æƒ³ä¸å¼•ç”¨ã€‚</p>
          <pre><code>// ç¬”è®°è¯„ä¼°æ¸…å• (ç¤ºä¾‹)
- æ˜¯å¦å¯å¤ç”¨ï¼Ÿ
- æ˜¯å¦å«æŠ½è±¡æ¨¡å‹ï¼Ÿ
- æ˜¯å¦å¸¦æ¥æºé“¾æ¥ï¼Ÿ
- æ˜¯å¦ä¸æ—¢æœ‰èŠ‚ç‚¹å»ºç«‹è¿æ¥ï¼Ÿ</code></pre>
          <h2>5. ç”Ÿå‘½å‘¨æœŸ</h2>
          <p>ç¬”è®°åº”å½“æœ‰çŠ¶æ€ï¼šInbox â†’ å¤„ç†ä¸­ â†’ å·²ç»“æ„åŒ– â†’ å·²å‘å¸ƒ / å½’æ¡£ã€‚</p>
          <h2>6. è¾“å‡ºé©±åŠ¨</h2>
          <p>ä¸€åˆ‡è¾“å…¥éƒ½åº”è¯¥æŒ‡å‘æœªæ¥çš„è¾“å‡ºå½¢æ€ï¼ˆæ–‡ç«  / è¯¾ç¨‹ / å·¥å…· / å†³ç­–ï¼‰ã€‚</p>
          <h2>7. ä¼˜é›…é€€åŒ–</h2>
          <p>ç³»ç»Ÿåº”åœ¨â€œæœ€ä½ç»´æŠ¤æŠ•å…¥â€æƒ…å†µä¸‹ä»ç„¶å¯ç”¨ã€‚</p>
          <p>ä¸‹ä¸€æ­¥æˆ‘å°†åˆ†äº«å¦‚ä½•ç”¨ Git + Markdown + è‡ªåŠ¨åŒ–è„šæœ¬æ‰“é€ ä½æ‘©æ“¦çŸ¥è¯†å·¥ä½œæµã€‚</p>
        `
      },
      {
        id: 2,
        title: "å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼šç›´å‡» 9 ä¸ªé«˜å½±å“åŠ›æŒ‡æ ‡",
        date: "2025-07-26",
        tags: ["å‰ç«¯","æ€§èƒ½","Web"],
        excerpt: "æ€§èƒ½æ˜¯ç”¨æˆ·ä½“éªŒçš„ç¬¬ä¸€æ„ŸçŸ¥ã€‚æœ¬æ–‡èšç„¦ 9 ä¸ªæœ€èƒ½æå‡çœŸå®ä½“éªŒçš„å…³é”®æŒ‡æ ‡ï¼Œå¹¶æä¾›æ‰§è¡Œæ¸…å•ã€‚",
        content: `
          <p>æ ¸å¿ƒæŒ‡æ ‡æ¥è‡ªæµè§ˆå™¨å¯è§‚æµ‹æ€§ + RUM å®è·µï¼Œå¦‚ FCP / LCP / CLS / INP / TTFB ç­‰ã€‚</p>
          <h2>1. å…³é”®æ¸²æŸ“è·¯å¾„è£å‰ª</h2>
          <p>å‡å°‘ <code>&lt;head&gt;</code> ä¸­é˜»å¡èµ„æºï¼›ä½¿ç”¨ <code>preload</code> / <code>async</code> / <code>defer</code>ã€‚</p>
          <h2>2. å›¾ç‰‡ç­–ç•¥</h2>
          <p>WebP / AVIFï¼Œè‡ªé€‚åº”å°ºå¯¸ï¼Œæ‡’åŠ è½½ï¼Œé¿å…æ— æ„ä¹‰è£…é¥°å›¾ã€‚</p>
          <h2>3. ä»£ç æ‹†åˆ†</h2>
          <p>æŒ‰è·¯ç”±/ç»„ä»¶åŠ¨æ€åŠ è½½ï¼Œå‡å°‘é¦–å± JS è§£æä¸æ‰§è¡Œæ—¶é—´ã€‚</p>
          <h2>4. èµ„æºç¼“å­˜</h2>
          <p>HTTP ç¼“å­˜ç­–ç•¥ + Service Worker ç¦»çº¿èƒ½åŠ›ã€‚</p>
          <pre><code>// nginx å“åº”å¤´ç¤ºä¾‹
location /static/ {
    add_header Cache-Control "public, max-age=31536000, immutable";
}</code></pre>
          <h2>5. å­—ä½“ä¼˜åŒ–</h2>
          <p>ä½¿ç”¨å¯å˜å­—ä½“ / å­é›†åŒ– / font-display: swapã€‚</p>
          <h2>6. å‡å°‘å¸ƒå±€æŠ–åŠ¨</h2>
          <p>é¢„ç•™å°ºå¯¸ï¼Œé¿å…å›¾ç‰‡/å¹¿å‘Šä½å¯¼è‡´ CLSã€‚</p>
          <h2>7. äº¤äº’å»¶è¿Ÿ</h2>
          <p>INP ä¼˜åŒ–ï¼šåˆ‡ç¢é•¿ä»»åŠ¡ã€ä½¿ç”¨ requestIdleCallbackã€è™šæ‹Ÿåˆ—è¡¨ã€‚</p>
          <h2>8. ç›‘æ§å›è·¯</h2>
          <p>å»ºç«‹æ€§èƒ½é¢„ç®— + CI æ£€æŸ¥ + RUM ä¸ŠæŠ¥ã€‚</p>
          <h2>9. æˆæœ¬è€ƒé‡</h2>
          <p>æ€§èƒ½ä¼˜åŒ–è¦ä¸â€œå›¢é˜Ÿå¤æ‚åº¦é¢„ç®—â€å¹³è¡¡ã€‚</p>
        `
      },
      {
        id: 3,
        title: "ä» 0 è®¾è®¡ä½ çš„ Side Project éª¨æ¶",
        date: "2025-07-21",
        tags: ["äº§å“","å‰¯ä¸šé¡¹ç›®","æ¶æ„"],
        excerpt: "ä¸€ä¸ªæˆåŠŸçš„ Side Project éœ€è¦å‰ç½®çš„è¾¹ç•Œè®¾å®šã€æŠ€æœ¯è£å‰ªã€è¿­ä»£ç­–ç•¥ä¸å†·å¯åŠ¨é¢„æ¡ˆã€‚",
        content: `
          <p>Side Project å¤±è´¥å¤šæ•°ä¸æ˜¯å› ä¸ºæŠ€æœ¯ï¼Œè€Œæ˜¯ç¼ºå°‘â€œçº¦æŸ + èŠ‚å¥â€ã€‚</p>
          <h2>æ ¸å¿ƒå››è±¡é™</h2>
          <p>ä»·å€¼å‡è®¾ / ç”¨æˆ·è·¯å¾„ / æŠ€æœ¯æœ€å°é›† / å¢é•¿é€šé“ã€‚</p>
          <h2>æŠ€æœ¯è£å‰ª</h2>
          <p>åªé€‰ä½  80% ç†Ÿæ‚‰ä¸”éƒ¨ç½²é“¾è·¯æœ€çŸ­çš„æ ˆã€‚</p>
          <pre><code>// MVP æŠ€æœ¯å†³ç­–ä¾‹
Web: Next.js + Tailwind + SQLite
Auth: Clerk / è‡ªå»º JWT
Deploy: Vercel
Monitor: Sentry + Umami</code></pre>
          <h2>èŠ‚å¥è®¾è®¡</h2>
          <p>é‡‡ç”¨ 2 å‘¨å†²åˆºï¼šéªŒè¯æ ¸å¿ƒ â†’ æ”¶é›†åé¦ˆ â†’ è°ƒæ•´å®šä½ã€‚</p>
        `
      },
      {
        id: 4,
        title: "ç”¨ GitHub Actions è‡ªåŠ¨åŒ–ä½ çš„é™æ€åšå®¢éƒ¨ç½²",
        date: "2025-07-15",
        tags: ["DevOps","è‡ªåŠ¨åŒ–","CI/CD"],
        excerpt: "ä¸€æ­¥æ­¥é…ç½®è‡ªåŠ¨åŒ–æµæ°´çº¿ï¼Œå®ç°æ¨é€å³å‘å¸ƒã€ç‰ˆæœ¬å¯è¿½æº¯ã€æ„å»ºå¯è§‚å¯Ÿã€‚",
        content: `
          <p>CI/CD è®©ä¸ªäººåšå®¢å…·å¤‡â€œå·¥ç¨‹çº§å¯æŒç»­æ€§â€ã€‚</p>
          <h2>åŸºç¡€å·¥ä½œæµ</h2>
          <pre><code>name: Deploy Blog
on:
  push:
    branches: [ main ]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: 20
      - run: npm ci
      - run: npm run build
      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          publish_dir: ./dist</code></pre>
          <h2>ç¼“å­˜ä¼˜åŒ–</h2>
          <p>ç”¨ actions/cache å¤ç”¨ä¾èµ–ã€‚</p>
        `
      },
      {
        id: 5,
        title: "è®¾è®¡ç³»ç»Ÿçš„ Token åˆ†å±‚ç­–ç•¥",
        date: "2025-07-09",
        tags: ["è®¾è®¡ç³»ç»Ÿ","UI","å‰ç«¯"],
        excerpt: "Token å±‚æ¬¡è‰¯å¥½ï¼Œæ‰èƒ½æ”¯æŒå¤šä¸»é¢˜ã€å¤šå“ç‰Œä¸é•¿å‘¨æœŸæ¼”åŒ–ã€‚æœ¬æ–‡æ‹†è§£åŸºç¡€ â†’ è¯­ä¹‰ â†’ ç»„ä»¶æ˜ å°„ã€‚",
        content: `
          <p>åŸºç¡€ Token ä¸ç›´æ¥è½åœ° UIï¼›è¯­ä¹‰ Token æŠ½è±¡æ„å›¾ï¼›ç»„ä»¶ Token æ˜ å°„å…·ä½“å®ç°ã€‚</p>
          <h2>å±‚æ¬¡ç»“æ„</h2>
          <pre><code>base: é¢œè‰²/é—´è·/å­—ä½“/é˜´å½±
semantic: primary-bg / success-fg / focus-ring
component: button-primary-bg / card-border</code></pre>
          <h2>å¤šä¸»é¢˜ç­–ç•¥</h2>
          <p>ä»…æ›¿æ¢ base + semanticï¼Œä¸åŠ¨ç»„ä»¶å±‚ã€‚</p>
        `
      },
      {
        id: 6,
        title: "å¦‚ä½•è¯„ä¼°ä¸€ä¸ªæŠ€æœ¯å†³ç­–çš„çœŸå®æˆæœ¬",
        date: "2025-07-02",
        tags: ["æ¶æ„","æ€è€ƒ","æŠ€æœ¯ç®¡ç†"],
        excerpt: "æŠ€æœ¯é€‰å‹ â‰  æŠ€æœ¯å–œå¥½ã€‚éœ€è¦å°†çŸ­æœŸäº¤ä»˜ / é•¿æœŸç»´æŠ¤ / é£é™©æ•å£ / æœºä¼šæˆæœ¬ä¸€èµ·é‡åŒ–ã€‚",
        content: `
          <p>å»ºç«‹ä¸€ä¸ªè¯„ä¼°çŸ©é˜µï¼Œå°†ä¸»è§‚åå¥½è½¬åŒ–ä¸ºç»“æ„åŒ–è¾“å…¥ã€‚</p>
          <h2>æŒ‡æ ‡</h2>
          <ul>
            <li>å­¦ä¹ æ›²çº¿</li>
            <li>ç¤¾åŒºæ´»è·ƒ</li>
            <li>ç”Ÿæ€æˆç†Ÿ</li>
            <li>è¿ç§»è·¯å¾„</li>
            <li>å¯è§‚å¯Ÿæ€§æ”¯æŒ</li>
          </ul>
        `
      },
      {
        id: 7,
        title: "ç”¨æœ€å°çº¦æŸå†™é«˜è´¨é‡æ—¥å¿—ï¼ˆDebug èµ„äº§åŒ–ï¼‰",
        date: "2025-06-28",
        tags: ["å·¥ç¨‹å®è·µ","è°ƒè¯•","å¯è§‚å¯Ÿæ€§"],
        excerpt: "æ—¥å¿—ä¸æ˜¯â€œè¾“å‡ºå­—ç¬¦ä¸²â€ï¼Œè€Œæ˜¯é—®é¢˜å¤ç°ä¸æ¨ç†é“¾å‹ç¼©çš„è½½ä½“ã€‚å¦‚ä½•è®©æ—¥å¿—å˜å¾—ç»“æ„åŒ–ã€é«˜ä»·å€¼ï¼Ÿ",
        content: `
          <p>æ ¸å¿ƒåŸåˆ™ï¼šç»“æ„åŒ– + å¯å…³è” + ä½å™ªéŸ³ + å¯åº¦é‡ã€‚</p>
          <h2>æ—¥å¿—çº§åˆ«ç­–ç•¥</h2>
          <p>æ˜ç¡®ä½•æ—¶è¿›å…¥ error / warn / info / debugã€‚</p>
          <h2>å­—æ®µè®¾è®¡</h2>
          <p>è¯·æ±‚ IDã€ç”¨æˆ· IDã€Trace IDã€è€—æ—¶ã€ç»“æœçŠ¶æ€ã€‚</p>
        `
      },
      {
        id: 8,
        title: "æé«˜è¾“å…¥è´¨é‡ï¼šä¿¡æ¯æ‘„å–çš„ 5 æ¡è¿‡æ»¤è§„èŒƒ",
        date: "2025-06-20",
        tags: ["å­¦ä¹ æ–¹æ³•","æ•ˆç‡","æ€è€ƒ"],
        excerpt: "ä¿¡æ¯è¿‡è½½æ—¶ä»£ï¼Œå†³å®šä»·å€¼çš„ä¸å†æ˜¯â€œè·å–â€ï¼Œè€Œæ˜¯â€œç­›é€‰ + åŠ å·¥è·¯å¾„â€ã€‚è¿™æ˜¯æˆ‘å®è·µæœ‰æ•ˆçš„ä¿¡æ¯è¿‡æ»¤æ ‡å‡†ã€‚",
        content: `
          <p>äº”æ¡è§„èŒƒï¼šæºå¤´å¯ä¿¡ / ä¸»é¢˜ç›¸å…³ / æ·±åº¦è¶³å¤Ÿ / å¯éªŒè¯ / å¯æ²‰æ·€ã€‚</p>
          <h2>åä¾‹è¯†åˆ«</h2>
          <p>äºŒæ‰‹æ‹¼æ¥ã€æ ‡é¢˜å…šã€æƒ…ç»ªåŒ–ç…½åŠ¨ã€ç¼ºå°‘æ•°æ®ã€‚</p>
        `
      },
      {
        id: 9,
        title: "å‰ç«¯é”™è¯¯ç›‘æ§ä½“ç³»æ­å»ºé€Ÿè®°",
        date: "2025-06-12",
        tags: ["å‰ç«¯","ç›‘æ§","å¯è§‚å¯Ÿæ€§"],
        excerpt: "ä» window.onerror åˆ° Sentry çš„å…¨é“¾è·¯ç­–ç•¥ï¼ŒåŒ…æ‹¬é‡‡é›†ã€æ¸…æ´—ã€èšåˆã€å‘Šè­¦ä¸å›æº¯ã€‚",
        content: `
          <p>å»ºç«‹å¯é—­ç¯ï¼šé‡‡é›† â†’ é™å™ª â†’ å½’å¹¶ â†’ è¿½è¸ª â†’ ä¿®å¤ â†’ éªŒè¯ã€‚</p>
          <h2>é™å™ª</h2>
          <p>è¿‡æ»¤ç¬¬ä¸‰æ–¹è„šæœ¬ã€ç½‘ç»œæ³¢åŠ¨ã€ç”¨æˆ·æ‰©å±•ã€‚</p>
        `
      },
      {
        id: 10,
        title: "æ‰“é€ ä¸ªäººå‘½ä»¤è¡Œå·¥å…·ï¼šä»è„šæ‰‹æ¶åˆ°å‘å¸ƒ",
        date: "2025-06-05",
        tags: ["å·¥å…·å¼€å‘","Node.js","CLI"],
        excerpt: "ä½¿ç”¨ Node.js + Commander + ESM æ‰“åŒ…ï¼Œæ„å»ºä½ çš„è‡ªåŠ¨åŒ– CLI å·¥å…·å¹¶å‘å¸ƒåˆ° npmã€‚",
        content: `
          <p>CLI è®©é‡å¤æ€§æ“ä½œç»“æ„åŒ–ã€‚</p>
          <h2>åˆå§‹åŒ–</h2>
          <pre><code>npm init -y
npm install commander</code></pre>
          <h2>å‘å¸ƒ</h2>
          <p>é…ç½® bin å­—æ®µï¼Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ã€‚</p>
        `
      }
    ];

    const state = {
      page: 1,
      pageSize: 6,
      tag: null,
      keyword: "",
    };

    const $ = sel => document.querySelector(sel);
    const $$ = sel => document.querySelectorAll(sel);

    const postsContainer = $("#postsContainer");
    const paginationEl = $("#pagination");
    const searchInput = $("#searchInput");
    const tagsFilter = $("#tagsFilter");
    const recentList = $("#recentList");
    const tagCloud = $("#tagCloud");
    const yearEl = $("#year");
    const overlay = $("#articleOverlay");
    const articleContent = $("#articleContent");
    const closeArticle = $("#closeArticle");
    const quickCreate = $("#quickCreate");
    const themeToggle = $("#themeToggle");

    yearEl.textContent = new Date().getFullYear();

    function uniqueTags() {
      const set = new Set();
      postsData.forEach(p => p.tags.forEach(t => set.add(t)));
      return [...set].sort();
    }

    function formatDate(dateStr) {
      const d = new Date(dateStr);
      return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`;
    }

    function filterPosts() {
      return postsData.filter(p => {
        const byTag = state.tag ? p.tags.includes(state.tag) : true;
        const q = state.keyword.trim().toLowerCase();
        const byKeyword = q
          ? (p.title + p.excerpt + p.tags.join(" ") + p.content.replace(/<[^>]+>/g,""))
              .toLowerCase()
              .includes(q)
          : true;
        return byTag && byKeyword;
      }).sort((a,b)=> new Date(b.date) - new Date(a.date));
    }

    function paginate(list) {
      const start = (state.page - 1) * state.pageSize;
      return list.slice(start, start + state.pageSize);
    }

    function renderPosts() {
      const filtered = filterPosts();
      const total = filtered.length;
      if (!total) {
        postsContainer.innerHTML = `<div class="empty">æœªæ‰¾åˆ°åŒ¹é…çš„æ–‡ç« ã€‚</div>`;
        paginationEl.innerHTML = "";
        return;
      }
      const pageCount = Math.ceil(total / state.pageSize);
      if (state.page > pageCount) {
        state.page = 1;
      }
      const current = paginate(filtered);
      postsContainer.innerHTML = current.map(post => `
        <div class="post-card" data-id="${post.id}">
          <div class="post-date">${formatDate(post.date)}</div>
          <h2>${post.title}</h2>
          <p class="post-excerpt">${post.excerpt}</p>
          <div class="post-tags">
            ${post.tags.map(t => `<span class="post-tag">${t}</span>`).join("")}
          </div>
          <a href="#read-${post.id}" class="read-more" data-read="${post.id}" aria-label="é˜…è¯»ã€Š${post.title}ã€‹">
            é˜…è¯» â†’
          </a>
        </div>
      `).join("");

      paginationEl.innerHTML = renderPagination(pageCount);
    }

    function renderPagination(pageCount) {
      const btns = [];
      const createBtn = (p, label = p) => `
        <button ${p === state.page ? 'class="active"' : ""} data-page="${p}">${label}</button>
      `;
      if (pageCount <= 1) return "";

      // ä¸Šä¸€é¡µ
      btns.push(`<button data-page="prev" ${state.page === 1 ? "disabled" : ""}>â€¹</button>`);

      const pages = [];
      for (let i=1;i<=pageCount;i++) pages.push(i);

      const windowSize = 5;
      let start = Math.max(1, state.page - Math.floor(windowSize/2));
      let end = start + windowSize - 1;
      if (end > pageCount) {
        end = pageCount;
        start = Math.max(1, end - windowSize + 1);
      }

      if (start > 1) {
        btns.push(createBtn(1));
        if (start > 2) btns.push(`<button disabled>â€¦</button>`);
      }

      for (let p = start; p <= end; p++) {
        btns.push(createBtn(p));
      }

      if (end < pageCount) {
        if (end < pageCount - 1) btns.push(`<button disabled>â€¦</button>`);
        btns.push(createBtn(pageCount));
      }

      // ä¸‹ä¸€é¡µ
      btns.push(`<button data-page="next" ${state.page === pageCount ? "disabled" : ""}>â€º</button>`);

      return btns.join("");
    }

    function renderTagFilter() {
      const tags = uniqueTags();
      tagsFilter.innerHTML = `
        <div class="tag-chip ${!state.tag ? 'active':''}" data-tag="">å…¨éƒ¨</div>
        ${tags.map(t => `<div class="tag-chip ${state.tag===t?'active':''}" data-tag="${t}">${t}</div>`).join("")}
      `;
    }

    function renderRecent() {
      const latest = [...postsData]
        .sort((a,b)=> new Date(b.date) - new Date(a.date))
        .slice(0,5);
      recentList.innerHTML = latest.map(p => `
        <li><a href="#read-${p.id}" data-read="${p.id}" style="font-size:.75rem;">${p.title}</a></li>
      `).join("");
    }

    function renderTagCloud() {
      const tags = uniqueTags();
      tagCloud.innerHTML = tags.map(t => `
        <a href="#tag-${encodeURIComponent(t)}" data-cloud-tag="${t}">${t}</a>
      `).join("");
    }

    function openArticle(id) {
      const post = postsData.find(p => p.id === Number(id));
      if (!post) return;
      articleContent.innerHTML = `
        <div class="article-meta">
          <span>æ—¥æœŸï¼š${formatDate(post.date)}</span>
          <span>æ ‡ç­¾ï¼š${post.tags.join(" / ")}</span>
          <span>IDï¼š${post.id}</span>
        </div>
        <h1>${post.title}</h1>
        <div class="article-content">${post.content}</div>
        <div class="article-footer">
          <div>Â© æœ¬æ–‡åŸºäº CC BY-NC-SA åè®®ï¼ˆç¤ºä¾‹ï¼‰</div>
          <div class="share">
            <button data-share="copy">å¤åˆ¶é“¾æ¥</button>
            <button data-share="twitter">Twitter</button>
            <button data-share="weibo">å¾®åš</button>
          </div>
        </div>
      `;
      overlay.style.display = "block";
      document.body.style.overflow = "hidden";
      history.replaceState(null,"",`#article-${post.id}`);
    }

    function closeArticleView() {
      overlay.style.display = "none";
      document.body.style.overflow = "";
      history.replaceState(null,"", location.pathname);
    }

    // äº‹ä»¶ç»‘å®š
    searchInput.addEventListener("input", e => {
      state.keyword = e.target.value;
      state.page = 1;
      renderPosts();
    });

    tagsFilter.addEventListener("click", e => {
      const tag = e.target.closest(".tag-chip")?.dataset.tag;
      if (tag !== undefined) {
        state.tag = tag || null;
        state.page = 1;
        renderTagFilter();
        renderPosts();
      }
    });

    paginationEl.addEventListener("click", e => {
      const btn = e.target.closest("button");
      if (!btn || btn.disabled) return;
      const val = btn.dataset.page;
      const filtered = filterPosts();
      const pageCount = Math.ceil(filtered.length / state.pageSize);
      if (val === "prev") {
        state.page = Math.max(1, state.page - 1);
      } else if (val === "next") {
        state.page = Math.min(pageCount, state.page + 1);
      } else {
        state.page = Number(val);
      }
      renderPosts();
      window.scrollTo({top:0,behavior:"smooth"});
    });

    document.addEventListener("click", e => {
      const read = e.target.closest("[data-read]");
      if (read) {
        e.preventDefault();
          openArticle(read.dataset.read);
      }
      // Tag Cloud ç‚¹å‡»
      const cloudTag = e.target.closest("[data-cloud-tag]");
      if (cloudTag) {
        state.tag = cloudTag.dataset.cloudTag;
        state.page = 1;
        renderTagFilter();
        renderPosts();
        window.scrollTo({top:0,behavior:"smooth"});
        e.preventDefault();
      }
      // æ–‡ç« åˆ†äº«
      const shareBtn = e.target.closest("[data-share]");
      if (shareBtn) {
        const type = shareBtn.dataset.share;
        const url = location.origin + location.pathname + location.hash;
        if (type === "copy") {
          navigator.clipboard.writeText(url).then(()=>{
            shareBtn.textContent = "å·²å¤åˆ¶";
            setTimeout(()=> shareBtn.textContent = "å¤åˆ¶é“¾æ¥", 1600);
          });
        } else if (type === "twitter") {
          window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(document.title)}&url=${encodeURIComponent(url)}`);
        } else if (type === "weibo") {
          window.open(`https://service.weibo.com/share/share.php?title=${encodeURIComponent(document.title)}&url=${encodeURIComponent(url)}`);
        }
      }
    });

    closeArticle.addEventListener("click", closeArticleView);
    overlay.addEventListener("click", e => {
      if (e.target === overlay) closeArticleView();
    });

    document.addEventListener("keydown", e => {
      if (e.key === "Escape" && overlay.style.display === "block") {
        closeArticleView();
      }
    });

    // å¿«é€Ÿåˆ›å»ºï¼ˆæ¼”ç¤ºï¼‰â€”â€” ä»…æ¨¡æ‹Ÿæ·»åŠ æ•°æ®
    quickCreate.addEventListener("click", () => {
      const id = postsData.length + 1;
      const now = new Date();
      const date = now.toISOString().slice(0,10);
      const post = {
        id,
        title: "æ–°æ–‡ç« è‰ç¨¿ #" + id,
        date,
        tags: ["è‰ç¨¿","ä¸´æ—¶"],
        excerpt: "è¿™æ˜¯ä¸€ç¯‡æ¼”ç¤ºæ·»åŠ çš„ä¸´æ—¶è‰ç¨¿æ–‡ç« ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œæ‰©å±•åç«¯æ¥å…¥é€»è¾‘ã€‚",
        content: "<p>è¿™é‡Œæ˜¯ç”¨äºæ¼”ç¤ºçš„è‰ç¨¿å†…å®¹ã€‚ä½ å¯ä»¥é›†æˆåç«¯ä¿å­˜è‰ç¨¿é€»è¾‘ã€‚</p>"
      };
      postsData.unshift(post);
      state.page = 1;
      renderTagFilter();
      renderPosts();
      renderRecent();
      renderTagCloud();
      openArticle(post.id);
    });

    // ä¸»é¢˜åˆ‡æ¢
    function applyTheme(theme) {
      document.documentElement.setAttribute("data-theme", theme);
      const dark = theme === "dark";
      themeToggle.textContent = dark ? "â˜€ï¸ æµ…è‰²" : "ğŸŒ™ æ·±è‰²";
      localStorage.setItem("theme", theme);
    }
    themeToggle.addEventListener("click", () => {
      const current = document.documentElement.getAttribute("data-theme");
      applyTheme(current === "dark" ? "light" : "dark");
    });

    (function initTheme(){
      const saved = localStorage.getItem("theme");
      if (saved) applyTheme(saved);
      else {
        const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        applyTheme(prefersDark ? "dark" : "light");
      }
    })();

    function initFromHash() {
      const hash = location.hash;
      if (hash.startsWith("#article-")) {
        const id = hash.split("-")[1];
        openArticle(id);
      } else if (hash.startsWith("#tag-")) {
        const t = decodeURIComponent(hash.slice(5));
        state.tag = t;
      }
    }

    // åˆå§‹åŒ–
    function init() {
      initFromHash();
      renderTagFilter();
      renderPosts();
      renderRecent();
      renderTagCloud();
    }
    init();
  </script>
</body>
</html>



